<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ACTION -->
    <record id="action_parckotech_facture_contrat" model="ir.actions.act_window">
        <field name="name">Factures contrat</field>
        <field name="res_model">parckotech.facture.contrat</field>
        <field name="view_mode">list,form,graph,pivot</field>
    </record>

    <!-- LIST VIEW -->
    <record id="view_parckotech_facture_contrat_list" model="ir.ui.view">
        <field name="name">parckotech.facture.contrat.list</field>
        <field name="model">parckotech.facture.contrat</field>
        <field name="type">list</field>
        <field name="arch" type="xml">
            <list string="Factures contrat">
                <field name="name"/>
                <field name="client_id"/>
                <field name="date_facture"/>
                <field name="date_echeance"/>
                <field name="montant_ttc" widget="monetary" options="{'currency_field':'currency_id'}"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_parckotech_facture_contrat_form" model="ir.ui.view">
        <field name="name">parckotech.facture.contrat.form</field>
        <field name="model">parckotech.facture.contrat</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Facture contrat">
                <sheet>
                    <header>
                        <field name="state" widget="statusbar"/>
                        <button name="action_send" type="object" string="Envoyer"
                                invisible="state != 'draft'" class="btn-primary"/>
                        <button name="action_mark_paid" type="object" string="Paiement reÃ§u"
                                invisible="state != 'sent'" class="btn-success"/>
                        <button name="action_cancel" type="object" string="Annuler"
                                invisible="state not in ['draft','sent']" class="btn-danger"/>
                    </header>
                    <group col="4">
                        <field name="name" readonly="1"/>
                        <field name="contrat_id"/>
                        <field name="client_id" readonly="1"/>
                        <field name="date_facture"/>
                        <field name="date_echeance" readonly="1"/>
                        <field name="periode_debut"/>
                        <field name="periode_fin"/>
                        <field name="montant_ht"/>
                        <field name="tva"/>
                        <field name="montant_tva" readonly="1"/>
                        <field name="montant_ttc" readonly="1"/>
                        <field name="paiement_effectue"/>
                        <field name="date_paiement"/>
                        <field name="method_paiement"/>
                        <field name="invoice_id" readonly="1"/>
                    </group>
                    <notebook>
                        <page string="Notes">
                            <field name="notes" nolabel="1"/>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- GRAPH VIEW -->
    <record id="view_parckotech_facture_contrat_graph" model="ir.ui.view">
        <field name="name">parckotech.facture.contrat.graph</field>
        <field name="model">parckotech.facture.contrat</field>
        <field name="type">graph</field>
        <field name="arch" type="xml">
            <graph string="Montants TTC par Date">
                <field name="date_facture" type="row"/>
                <field name="montant_ttc" type="measure"/>
            </graph>
        </field>
    </record>

    <!-- PIVOT VIEW -->
    <record id="view_parckotech_facture_contrat_pivot" model="ir.ui.view">
        <field name="name">parckotech.facture.contrat.pivot</field>
        <field name="model">parckotech.facture.contrat</field>
        <field name="type">pivot</field>
        <field name="arch" type="xml">
            <pivot string="Analyse Factures">
                <field name="date_facture" type="row"/>
                <field name="state" type="col"/>
                <field name="montant_ttc" type="measure"/>
            </pivot>
        </field>
    </record>
</odoo>
